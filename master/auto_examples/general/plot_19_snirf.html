
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SNIRF Support in MNE &#8212; MNE-NIRS 0.0.3 dev documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap_divs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-rendered-html.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/bootstrap_divs.js"></script>
    <script src="../../_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Signal Enhancement Techniques" href="plot_20_enhance.html" />
    <link rel="prev" title="Waveform averaging analysis" href="plot_15_waveform.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <p class="title">MNE-NIRS</p>
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">Examples</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../api.html">API</a>
        </li>
        
        
      </ul>

      <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
      

      <ul class="navbar-nav">
        <!-- version dropdown -->
        <li class="dropdown">
            <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="dLabelMore" data-toggle="dropdown">
                master
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="dLabelMore">
                    <li><a href="plot_19_snirf.html">master</a></li>
                    <li><a href="https://mne.tools/mne-nirs/v0.0.2/index.html">v0.0.2 (stable)</a></li>
            </ul>
          </li>
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/mne-tools/mne-nirs" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
        <!-- discourse forum link -->
        <li class="nav-item">
            <a class="nav-link" href="https://mne.discourse.group" target="_blank" rel="noopener">
              <span><i class="fab fa-discourse"></i></span>
            </a>
          </li>
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#import-raw-nirs-data-from-vendor" class="nav-link">Import raw NIRS data from vendor</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#write-data-as-snirf" class="nav-link">Write data as SNIRF</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#read-back-snirf-file" class="nav-link">Read back SNIRF file</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#compare-files" class="nav-link">Compare files</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-general-plot-19-snirf-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="snirf-support-in-mne">
<span id="tut-fnirs-snirf"></span><span id="sphx-glr-auto-examples-general-plot-19-snirf-py"></span><h1>SNIRF Support in MNE<a class="headerlink" href="#snirf-support-in-mne" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="sidebar-title">.nirs files</p>
<p>If you wish to process your .nirs files in MNE use the official snirf
converter to create .snirf file.
See <a class="reference external" href="https://github.com/fNIRS/snirf_homer3">https://github.com/fNIRS/snirf_homer3</a></p>
</div>
<p>SNIRF is a file format for storing
functional near-infrared spectroscopy (fNIRS)
data. The specification is maintained
by the society for functional near infrared spectroscopy. In this tutorial
we demonstrate how to convert your MNE data to SNIRF and also how to read
SNIRF files.</p>
<p>Read the SNIRF protocol over at <a class="reference external" href="https://github.com/fNIRS/snirf">https://github.com/fNIRS/snirf</a></p>
<div class="contents local topic" id="page-contents">
<p class="topic-title">Page contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#import-raw-nirs-data-from-vendor" id="id1">Import raw NIRS data from vendor</a></p></li>
<li><p><a class="reference internal" href="#write-data-as-snirf" id="id2">Write data as SNIRF</a></p></li>
<li><p><a class="reference internal" href="#read-back-snirf-file" id="id3">Read back SNIRF file</a></p></li>
<li><p><a class="reference internal" href="#compare-files" id="id4">Compare files</a></p></li>
</ul>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authors: Robert Luke &lt;mail@robertluke.net&gt;</span>
<span class="c1">#</span>
<span class="c1"># License: BSD (3-clause)</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">mne</span>

<span class="kn">from</span> <span class="nn">mne.io</span> <span class="kn">import</span> <a href="https://mne.tools/stable/generated/mne.io.read_raw_nirx.html#mne.io.read_raw_nirx" title="mne.io.read_raw_nirx" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">read_raw_nirx</span></a><span class="p">,</span> <a href="https://mne.tools/stable/generated/mne.io.read_raw_snirf.html#mne.io.read_raw_snirf" title="mne.io.read_raw_snirf" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">read_raw_snirf</span></a>
<span class="kn">from</span> <span class="nn">mne_nirs.io</span> <span class="kn">import</span> <span class="n">write_raw_snirf</span>
<span class="kn">from</span> <span class="nn">numpy.testing</span> <span class="kn">import</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose" class="sphx-glr-backref-module-numpy-testing sphx-glr-backref-type-py-function"><span class="n">assert_allclose</span></a>
</pre></div>
</div>
<div class="section" id="import-raw-nirs-data-from-vendor">
<h2><a class="toc-backref" href="#id1">Import raw NIRS data from vendor</a><a class="headerlink" href="#import-raw-nirs-data-from-vendor" title="Permalink to this headline">¶</a></h2>
<p>First we import some example data recorded with a NIRX device.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_data_folder</span></a> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.datasets.fnirs_motor.data_path.html#mne.datasets.fnirs_motor.data_path" title="mne.datasets.fnirs_motor.data_path" class="sphx-glr-backref-module-mne-datasets-fnirs_motor sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">fnirs_motor</span><span class="o">.</span><span class="n">data_path</span></a><span class="p">()</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_raw_dir</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_data_folder</span></a><span class="p">,</span> <span class="s1">&#39;Participant-1&#39;</span><span class="p">)</span>
<span class="n">raw_intensity</span> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.io.read_raw_nirx.html#mne.io.read_raw_nirx" title="mne.io.read_raw_nirx" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">read_raw_nirx</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_raw_dir</span></a><span class="p">)</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Loading /home/runner/mne_data/MNE-fNIRS-motor-data/Participant-1
Reading 0 ... 23238  =      0.000 ...  2974.464 secs...
</pre></div>
</div>
</div>
<div class="section" id="write-data-as-snirf">
<h2><a class="toc-backref" href="#id2">Write data as SNIRF</a><a class="headerlink" href="#write-data-as-snirf" title="Permalink to this headline">¶</a></h2>
<p>Now we can write this data back to disk in the SNIRF format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">write_raw_snirf</span><span class="p">(</span><span class="n">raw_intensity</span><span class="p">,</span> <span class="s1">&#39;test_raw.snirf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="read-back-snirf-file">
<h2><a class="toc-backref" href="#id3">Read back SNIRF file</a><a class="headerlink" href="#read-back-snirf-file" title="Permalink to this headline">¶</a></h2>
<p>Next we can read back the snirf file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">snirf_intensity</span> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.io.read_raw_snirf.html#mne.io.read_raw_snirf" title="mne.io.read_raw_snirf" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">read_raw_snirf</span></a><span class="p">(</span><span class="s1">&#39;test_raw.snirf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Loading test_raw.snirf
</pre></div>
</div>
</div>
<div class="section" id="compare-files">
<h2><a class="toc-backref" href="#id4">Compare files</a><a class="headerlink" href="#compare-files" title="Permalink to this headline">¶</a></h2>
<p>Finally we can compare the data of the original to the SNIRF format and
ensure that the values are the same.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://numpy.org/doc/stable/reference/generated/numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose" class="sphx-glr-backref-module-numpy-testing sphx-glr-backref-type-py-function"><span class="n">assert_allclose</span></a><span class="p">(</span><a href="https://mne.tools/stable/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.get_data" title="mne.io.BaseRaw.get_data" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw_intensity</span><span class="o">.</span><span class="n">get_data</span></a><span class="p">(),</span> <a href="https://mne.tools/stable/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.get_data" title="mne.io.BaseRaw.get_data" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">snirf_intensity</span><span class="o">.</span><span class="n">get_data</span></a><span class="p">())</span>

<a href="https://mne.tools/stable/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.plot" title="mne.io.BaseRaw.plot" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">snirf_intensity</span><span class="o">.</span><span class="n">plot</span></a><span class="p">(</span><span class="n">n_channels</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">show_scrollbars</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="plot 19 snirf" class="sphx-glr-single-img" src="../../_images/sphx_glr_plot_19_snirf_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;__array_function__ internals&gt;:5: FutureWarning: Promotion of numbers and bools to strings is deprecated. In the future, code such as `np.concatenate(([&#39;string&#39;], [0]))` will raise an error, while `np.asarray([&#39;string&#39;, 0])` will return an array with `dtype=object`.  To avoid the warning while retaining a string result use `dtype=&#39;U&#39;` (or &#39;S&#39;).  To get an array of Python objects use `dtype=object`. (Warning added in NumPy 1.21)

&lt;MNEBrowseFigure size 640x480 with 4 Axes&gt;
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  2.578 seconds)</p>
<p><strong>Estimated memory usage:</strong>  77 MB</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-general-plot-19-snirf-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/289cb28ffc033a1e106798256017c11d/plot_19_snirf.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_19_snirf.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/2fcf021116fc720b3d6294170f2cb01c/plot_19_snirf.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_19_snirf.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="plot_15_waveform.html" title="previous page">Waveform averaging analysis</a>
    <a class='right-next' id="next-link" href="plot_20_enhance.html" title="next page">Signal Enhancement Techniques</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-188272121-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2020, Robert Luke.<br/>
    </p>
  </div>
</footer>
  </body>
</html>